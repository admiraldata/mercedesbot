name: b_book_test_drive_car_confirmed_unplan_ar
states:
    contact_email:
        component: meya.input_pattern
        properties:
            text: ربما تغير رأيك إن جربت قيادة واحدة! لأي بريد إلكتروني يمكننا إرسال
                تأكيد الحجز؟
            pattern: (^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$)
            output: test_drive_email
            scope: flow
            require_match: false
        transitions:
            next: test_drive_contact_num
            no_match: ambiguous_email_answer
    ambiguous_email_answer:
        component: meya.input_string
        properties:
            text: عفوا، لم أفهم. للاستمرار، يرجى إدخال بريد إلكتروني سليم. أو اطبع
                كلمة 'خروج'.
            output: test_drive_email
            scope: flow
    check_email_small_exit:
        component: meya.conditional_equal
        properties:
            value1: '{{ flow.test_drive_email }}'
            value2: exit
        transitions:
            equal: exit_bot
            notequal: check_email_proper_exit
    check_email_proper_exit:
        component: meya.conditional_equal
        properties:
            value1: '{{ flow.test_drive_email }}'
            value2: Exit
        transitions:
            equal: exit_bot
            notequal: check_email_caps_exit
    check_email_caps_exit:
        component: meya.conditional_equal
        properties:
            value1: '{{ flow.test_drive_email }}'
            value2: EXIT
        transitions:
            equal: exit_bot
            notequal: test_drive_contact_num
    test_drive_contact_num:
        component: meya.input_string
        properties:
            text: 'شكرا. هلاّ زودتنا برقم الهاتف الذي تفضله؟ '
            output: test_drive_contact
            scope: flow
    check_cont_small_exit:
        component: meya.conditional_equal
        properties:
            value1: '{{ flow.test_drive_contact }}'
            value2: exit
        transitions:
            equal: exit_bot
            notequal: check_cont_proper_exit
    check_cont_proper_exit:
        component: meya.conditional_equal
        properties:
            value1: '{{ flow.test_drive_contact }}'
            value2: Exit
        transitions:
            equal: exit_bot
            notequal: check_cont_caps_exit
    check_cont_caps_exit:
        component: meya.conditional_equal
        properties:
            value1: '{{ flow.test_drive_contact }}'
            value2: EXIT
        transitions:
            equal: exit_bot
            notequal: test_location
    test_location:
        flow: b_test_drive_location_ar
    exit_bot:
        flow: z_exit_flow_ar
